import{_ as k}from"./UmJeYgb-.js";import{e as $,m as x,o as c,c as m,a as o,F as C,r as E,n as f,q as b,t as v,l as y,h as g,s as B,j as N,v as S,b as p,u as r,w as A}from"./Cgyv_X2I.js";import H from"./s9U2uBAW.js";import{u as q,q as I}from"./De6ZgxxF.js";import{a as M,u as P}from"./BwNWpOjE.js";import"./B3P9L_5g.js";import"./DBDcCybL.js";import"./BSZFgSs5.js";import"./nBvaaqy8.js";import"./BfdNyRY5.js";const V={key:0,class:"article-nav"},D={class:"article-nav-list"},L=["href","onClick"],R={__name:"ArticleNav",setup(w){const a=g(null),l=g([]),u=()=>{const n=document.querySelectorAll("main h2, main h3, main h4, main h5, main h6"),s=[];n.forEach((e,i)=>{e.id||(e.id=`heading-${i}`);const d=parseInt(e.tagName[1]);s.push({id:e.id,text:e.textContent,level:d,element:e})}),l.value=s},t=()=>{let n=null,s=1/0;l.value.forEach(e=>{const i=e.element;if(i){const d=i.getBoundingClientRect(),h=Math.abs(d.top-100);h<s&&(s=h,n=e.id)}}),a.value=n},_=n=>{const s=document.getElementById(n);s&&(s.scrollIntoView({behavior:"smooth",block:"start"}),a.value=n)};return $(()=>{setTimeout(()=>{u()},100),window.addEventListener("scroll",t)}),x(()=>{window.removeEventListener("scroll",t)}),(n,s)=>l.value.length>0?(c(),m("nav",V,[s[0]||(s[0]=o("div",{class:"article-nav-title"},[o("p",null,"æœ¬é å…§å®¹")],-1)),o("ul",D,[(c(!0),m(C,null,E(l.value,e=>(c(),m("li",{key:e.id,class:f(`level-${e.level}`)},[o("a",{href:`#${e.id}`,class:f({active:a.value===e.id}),onClick:b(i=>_(e.id),["prevent"])},v(e.text),11,L)],2))),128))])])):y("",!0)}},j={class:"blog-post-main"},F={class:"post-wrap"},O={key:0,class:"post-main"},T={key:1,class:"error-msg"},ee={__name:"[...slug]",async setup(w){let a,l;const u=B(),{data:t}=([a,l]=N(()=>q(`content-${u.path}`,()=>I().where({_path:u.path}).findOne())),a=await a,l(),a);return console.log("Post data:",t.value),M(),S(()=>{t.value&&P({meta:[{name:"keywords",content:t.value.keywords||""},{property:"og:image",content:t.value.image||""}],script:[{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"BlogPosting",headline:t.value.title,description:t.value.description,image:t.value.image||"",author:{"@type":"Person",name:t.value.author||"æ ¡å‹æœƒ"},datePublished:t.value.date})}]})}),(_,n)=>{const s=k,e=R,i=H;return c(),m("main",j,[p(s,{"post-title":r(t)?.title},null,8,["post-title"]),o("div",F,[p(e),r(t)?(c(),m("div",O,[o("h1",null,v(r(t).title),1),p(i,{value:r(t)},{empty:A(()=>[...n[0]||(n[0]=[o("p",null,"æ–‡ç« å…§å®¹ç©ºç™½",-1)])]),_:1},8,["value"])])):r(t)?y("",!0):(c(),m("div",T,[o("p",null,"ğŸ” æ‰¾ä¸åˆ°æ–‡ç«  (è·¯å¾‘: "+v(r(u).path)+")",1),n[1]||(n[1]=o("p",null,"è«‹ç¢ºèª content/ ç›®éŒ„ä¸‹æœ‰å°æ‡‰çš„ .md æª”æ¡ˆ",-1))]))])])}}};export{ee as default};
