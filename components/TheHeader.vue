<script setup>
import { selector } from 'gsap/src/all';
import { RouterLink, RouterView } from 'vue-router'
import { useDark, useToggle } from '@vueuse/core'


const isDark = useDark({
    selector: "body",
    attribute: "data-theme",
    valueDark: "Dark",
    valueLight: "Default",
})

const toggleDark = useToggle(isDark)

// 用 ref 來管理狀態
const isOpen = ref(false);
const navMenu = ref(null);

// 切換選單顯示狀態
const toggleMenu = () => {
    isOpen.value = !isOpen.value;
    if (isOpen.value) {
        isMenuVisible.value = true;
        body.style.overflow = 'hidden';
    } else {
        // 添加一個延遲來等待過渡效果結束後隱藏選單
        setTimeout(() => {
            isMenuVisible.value = false;
        }, 500); // 與過渡效果的持續時間相同
    }
};

// 點擊選單後自動關閉
const closeMenu = () => {
    isOpen.value = false;
    setTimeout(() => {
        isMenuVisible.value = false;
    }, 500);
};

onMounted(() => {
    window.onscroll = function a() {
        var h = document.documentElement.scrollTop || document.body.scrollTop;
        var headerTop = document.getElementById('headerScroll');
        if (headerTop) {
            if (h > 100) {
                headerTop.style.background = 'var(--headerBg-glass)';
                // headerTop.style.borderBottom = '2px solid var(--colors-styles-border-glass-l)';
                headerTop.style.backdropFilter = 'blur(16px)';
                headerTop.style.transition = '.5s';
                headerTop.style.boxShadow = '0px 4px 36px var(--colors-styles-shadow-glass)';
            } else if (h <= 100) {
                headerTop.style.background = 'transparent';
                headerTop.style.backdropFilter = 'unset';
                // headerTop.style.borderBottom = '2px solid transparent';
                headerTop.style.boxShadow = 'none';
            }
        }
    }
});



</script>

<template data-theme="isDark ? 'Dark' : 'Default' ">
    <header>
        <div class="header-wrap" id="headerScroll">
            <div class="brand">
                <svg width="31" height="21" viewBox="0 0 31 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M13.6641 0.399999H20.2721V20H13.6641V0.399999ZM7.56009 20H0.952094V0.399999H7.56009V20ZM14.1121 12.776H7.11209V7.344H14.1121V12.776ZM26.396 20.28C25.3507 20.28 24.4733 19.944 23.764 19.272C23.0547 18.5813 22.7 17.704 22.7 16.64C22.7 15.5573 23.0547 14.6893 23.764 14.036C24.4733 13.3827 25.3507 13.056 26.396 13.056C27.4413 13.056 28.3187 13.3827 29.028 14.036C29.7373 14.6893 30.092 15.5573 30.092 16.64C30.092 17.704 29.7373 18.5813 29.028 19.272C28.3187 19.944 27.4413 20.28 26.396 20.28Z"
                        fill="#656565" />
                </svg>
            </div>
            <nav class="pc-menu">
                <a href="" class="">About</a>
                <a href="" class="">Blog</a>
                <a href="" class="">Work</a>
                <a href="" class="">Contact</a>
            </nav>
            <div class="mb-menu">
                <label class="dark-switch">
                    <input type="checkbox" @click="toggleDark()">
                    <span class="switch-main">
                        <div class="switch-icon">
                            <svg v-if="isDark" width="18" height="18" viewBox="0 0 18 18" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <g id="lcon-dark">
                                    <path id="Vector"
                                        d="M7.33318 2.52591C6.80831 3.66527 6.64525 4.93812 6.86594 6.173C7.08664 7.40787 7.6805 8.54545 8.56753 9.43247C9.45455 10.3195 10.5921 10.9134 11.827 11.1341C13.0619 11.3548 14.3347 11.1917 15.4741 10.6668C14.7964 13.7186 12.0739 16 8.81818 16C5.0525 16 2 12.9475 2 9.18182C2 5.92614 4.28136 3.20364 7.33318 2.52591ZM13.0209 2.56205L13.5909 2.70455V3.38636L13.0209 3.52886C12.7812 3.58882 12.5623 3.71279 12.3875 3.88752C12.2128 4.06225 12.0888 4.28118 12.0289 4.52091L11.8864 5.09091H11.2045L11.062 4.52091C11.0021 4.28118 10.8781 4.06225 10.7034 3.88752C10.5287 3.71279 10.3097 3.58882 10.07 3.52886L9.5 3.38636V2.70455L10.07 2.56205C10.3096 2.50198 10.5284 2.37797 10.703 2.20324C10.8776 2.02851 11.0015 1.80964 11.0614 1.57L11.2045 1H11.8864L12.0289 1.57C12.0888 1.80973 12.2128 2.02866 12.3875 2.20339C12.5623 2.37812 12.7812 2.50209 13.0209 2.56205ZM16.43 5.97114L17 6.11364V6.79545L16.43 6.93795C16.1903 6.99791 15.9713 7.12188 15.7966 7.29661C15.6219 7.47134 15.4979 7.69027 15.438 7.93L15.2955 8.5H14.6136L14.4711 7.93C14.4112 7.69027 14.2872 7.47134 14.1125 7.29661C13.9377 7.12188 13.7188 6.99791 13.4791 6.93795L12.9091 6.79545V6.11364L13.4791 5.97114C13.7188 5.91118 13.9377 5.78721 14.1125 5.61248C14.2872 5.43775 14.4112 5.21882 14.4711 4.97909L14.6136 4.40909H15.2955L15.438 4.97909C15.4979 5.21882 15.6219 5.43775 15.7966 5.61248C15.9713 5.78721 16.1903 5.91118 16.43 5.97114Z"
                                        fill="gray" />
                                </g>
                            </svg>
                            <svg v-else width="18" height="18" viewBox="0 0 18 18" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <g id="lcon-light" clip-path="url(#clip0_666_57)">
                                    <path id="Vector"
                                        d="M8.25 2.25V1.5C8.25 1.2875 8.322 1.1095 8.466 0.966003C8.61 0.822503 8.788 0.750503 9 0.750003C9.212 0.749503 9.39025 0.821503 9.53475 0.966003C9.67925 1.1105 9.751 1.2885 9.75 1.5V2.25C9.75 2.4625 9.678 2.64075 9.534 2.78475C9.39 2.92875 9.212 3.0005 9 3C8.788 2.9995 8.61 2.9275 8.466 2.784C8.322 2.6405 8.25 2.4625 8.25 2.25ZM8.25 16.5V15.75C8.25 15.5375 8.322 15.3595 8.466 15.216C8.61 15.0725 8.788 15.0005 9 15C9.212 14.9995 9.39025 15.0715 9.53475 15.216C9.67925 15.3605 9.751 15.5385 9.75 15.75V16.5C9.75 16.7125 9.678 16.8908 9.534 17.0348C9.39 17.1788 9.212 17.2505 9 17.25C8.788 17.2495 8.61 17.1775 8.466 17.034C8.322 16.8905 8.25 16.7125 8.25 16.5ZM16.5 9.75H15.75C15.5375 9.75 15.3595 9.678 15.216 9.534C15.0725 9.39 15.0005 9.212 15 9C14.9995 8.788 15.0715 8.61 15.216 8.466C15.3605 8.322 15.5385 8.25 15.75 8.25H16.5C16.7125 8.25 16.8908 8.322 17.0348 8.466C17.1788 8.61 17.2505 8.788 17.25 9C17.2495 9.212 17.1775 9.39025 17.034 9.53475C16.8905 9.67925 16.7125 9.751 16.5 9.75ZM2.25 9.75H1.5C1.2875 9.75 1.1095 9.678 0.966003 9.534C0.822503 9.39 0.750503 9.212 0.750003 9C0.749503 8.788 0.821503 8.61 0.966003 8.466C1.1105 8.322 1.2885 8.25 1.5 8.25H2.25C2.4625 8.25 2.64075 8.322 2.78475 8.466C2.92875 8.61 3.0005 8.788 3 9C2.9995 9.212 2.9275 9.39025 2.784 9.53475C2.6405 9.67925 2.4625 9.751 2.25 9.75ZM14.8125 4.25625L14.55 4.51875C14.4125 4.65625 14.2408 4.725 14.0348 4.725C13.8288 4.725 13.6505 4.65 13.5 4.5C13.3625 4.3625 13.2905 4.19075 13.284 3.98475C13.2775 3.77875 13.3433 3.6005 13.4813 3.45L13.7625 3.16875C13.9 3.01875 14.075 2.94375 14.2875 2.94375C14.5 2.94375 14.6813 3.01875 14.8313 3.16875C14.9813 3.31875 15.0533 3.5 15.0473 3.7125C15.0413 3.925 14.963 4.10625 14.8125 4.25625ZM4.51875 14.55L4.2375 14.8313C4.1 14.9813 3.925 15.0563 3.7125 15.0563C3.5 15.0563 3.31875 14.9813 3.16875 14.8313C3.01875 14.6813 2.94675 14.5 2.95275 14.2875C2.95875 14.075 3.037 13.8938 3.1875 13.7438L3.45 13.4813C3.5875 13.3438 3.7595 13.275 3.966 13.275C4.1725 13.275 4.3505 13.35 4.5 13.5C4.6375 13.6375 4.7095 13.8095 4.716 14.016C4.7225 14.2225 4.65675 14.4005 4.51875 14.55ZM13.7438 14.8125L13.4813 14.55C13.3438 14.4125 13.275 14.2408 13.275 14.0348C13.275 13.8288 13.35 13.6505 13.5 13.5C13.6375 13.3625 13.8095 13.2908 14.016 13.2848C14.2225 13.2788 14.4005 13.3443 14.55 13.4813L14.8313 13.7625C14.9813 13.9 15.0563 14.075 15.0563 14.2875C15.0563 14.5 14.9813 14.6813 14.8313 14.8313C14.6813 14.9813 14.5 15.0533 14.2875 15.0473C14.075 15.0413 13.8938 14.963 13.7438 14.8125ZM3.45 4.51875L3.16875 4.2375C3.01875 4.1 2.94375 3.925 2.94375 3.7125C2.94375 3.5 3.01875 3.31875 3.16875 3.16875C3.31875 3.01875 3.5 2.94675 3.7125 2.95275C3.925 2.95875 4.10625 3.037 4.25625 3.1875L4.51875 3.45C4.65625 3.5875 4.725 3.7595 4.725 3.966C4.725 4.1725 4.65 4.3505 4.5 4.5C4.3625 4.6375 4.19075 4.7095 3.98475 4.716C3.77875 4.7225 3.6005 4.65675 3.45 4.51875ZM9 13.5C7.75 13.5 6.6875 13.0625 5.8125 12.1875C4.9375 11.3125 4.5 10.25 4.5 9C4.5 7.75 4.9375 6.6875 5.8125 5.8125C6.6875 4.9375 7.75 4.5 9 4.5C10.25 4.5 11.3125 4.9375 12.1875 5.8125C13.0625 6.6875 13.5 7.75 13.5 9C13.5 10.25 13.0625 11.3125 12.1875 12.1875C11.3125 13.0625 10.25 13.5 9 13.5Z"
                                        fill="#BBBBBB" />
                                </g>
                                <defs>
                                    <clipPath id="clip0_666_57">
                                        <rect width="18" height="18" fill="white" />
                                    </clipPath>
                                </defs>
                            </svg>
                        </div>
                    </span>
                </label>
                <nav class="nav-menu" id="nav-menu" ref="navMenu" @click="toggleMenu" :class="{ open: isOpen }">
                    <span></span>
                    <span></span>
                    <span></span>
                </nav>
            </div>
        </div>
        <div class="menu-main" :class="{ open: isOpen }">
            <!-- <nav class="nav-menu open" id="nav-menu" ref="navMenu" @click="toggleMenu">
                <span></span>
                <span></span>
                <span></span>
            </nav> -->
            <a href="" class="">About</a>
            <a href="" class="">Blog</a>
            <a href="" class="">Work</a>
            <a href="" class="">Contact</a>
        </div>
    </header>
</template>

<style lang="scss" scoped>
// @import '@/assets/layout/header'</style>